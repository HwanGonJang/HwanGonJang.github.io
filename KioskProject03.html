<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Camp51.9 Kiosk Project (3)Google Firebase 연동</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />

    <!-- custom.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/custom.css" />
    
    <!--Web font-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/earlyaccess/nanumgothic.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&display=swap" rel="stylesheet">

    <!-- syntax.css -->
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />

    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="장환곤의 포트폴리오 사이트" />
    <link rel="shortcut icon" href="https://HwanGonJang.github.io/assets/built/images/main.png" type="image/png" />
    <link rel="canonical" href="https://HwanGonJang.github.io/KioskProject03" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="Gon's Portfolio" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Camp51.9 Kiosk Project (3)Google Firebase 연동" />
    <meta property="og:description" content="Camp51.9 Kiosk Project (3)Google Firebase 연동 Camp51.9 Kiosk Project html, css, javascript를 처음 공부하는 동시에 영등포고등학교 메이커스페이스 Camp51.9의 시설 이용 키오스크를 직접 개발하는 프로젝트. 개요 앞선 글의 소스코드나 동작 과정을 보면 DB가 존재함을 알 수 있었습니다. 키오스크이고 로그인을 지원하기 때문에 회원가입한 사용자의 정보와 메이커스페이스의 시설 이용정보, 남은 여석, 유료 장비" />
    <meta property="og:url" content="https://HwanGonJang.github.io/KioskProject03" />
    <meta property="og:image" content="https://HwanGonJang.github.io/assets/built/images/loginCamp.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2021-02-04T01:40:00+09:00" />
    <meta property="article:modified_time" content="2021-02-04T01:40:00+09:00" />
    <meta property="article:tag" content="Web" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Camp51.9 Kiosk Project (3)Google Firebase 연동" />
    <meta name="twitter:description" content="Camp51.9 Kiosk Project (3)Google Firebase 연동 Camp51.9 Kiosk Project html, css, javascript를 처음 공부하는 동시에 영등포고등학교 메이커스페이스 Camp51.9의 시설 이용 키오스크를 직접 개발하는 프로젝트. 개요 앞선 글의 소스코드나 동작 과정을 보면 DB가 존재함을 알 수 있었습니다. 키오스크이고 로그인을 지원하기 때문에 회원가입한 사용자의 정보와 메이커스페이스의 시설 이용정보, 남은 여석, 유료 장비" />
    <meta name="twitter:url" content="https://HwanGonJang.github.io/" />
    <meta name="twitter:image" content="https://HwanGonJang.github.io/assets/built/images/loginCamp.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="Gon's Portfolio" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Web" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "Gon's Portfolio",
        "logo": "https://HwanGonJang.github.io/"
    },
    "url": "https://HwanGonJang.github.io/KioskProject03",
    "image": {
        "@type": "ImageObject",
        "url": "https://HwanGonJang.github.io/assets/built/images/loginCamp.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "https://HwanGonJang.github.io/KioskProject03"
    },
    "description": "Camp51.9 Kiosk Project (3)Google Firebase 연동 Camp51.9 Kiosk Project html, css, javascript를 처음 공부하는 동시에 영등포고등학교 메이커스페이스 Camp51.9의 시설 이용 키오스크를 직접 개발하는 프로젝트. 개요 앞선 글의 소스코드나 동작 과정을 보면 DB가 존재함을 알 수 있었습니다. 키오스크이고 로그인을 지원하기 때문에 회원가입한 사용자의 정보와 메이커스페이스의 시설 이용정보, 남은 여석, 유료 장비"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Camp51.9 Kiosk Project (3)Google Firebase 연동" href="/feed.xml" />


</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="https://HwanGonJang.github.io/">Gon's Portfolio</a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-python" role="menuitem"><a href="/tag/python/">Python</a></li>
    <li class="nav-web" role="menuitem"><a href="/tag/web/">Web</a></li>
    <li class="nav-c" role="menuitem"><a href="/tag/c/">C</a></li>
    <li class="nav-etc" role="menuitem"><a href="/tag/etc/">etc</a></li>
    <li class="nav-google" role="menuitem"><a href="/tag/google/">Google</a></li>
    <li class="nav-r" role="menuitem"><a href="/tag/r/">R&통계</a></li>
    <li class="nav-ai" role="menuitem"><a href="/tag/ai/">AI</a></li>
    <li class="nav-JAVA" role="menuitem"><a href="/tag/java/">JAVA</a></li>
    <li class="nav-archive" role="menuitem">
        <a href="/archive.html">All Posts</a>
    </li>
    <li class="nav-archive" role="menuitem">
        <a href="/author_archive.html">Tag별 Posts</a>
    </li>
</ul>
        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Subscribe</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  tag-web post tag-web ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime=" 4 February 2021"> 4 February 2021</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/web/'>WEB</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Camp51.9 Kiosk Project (3)Google Firebase 연동</h1>
            </header>

            <!--
            
            <figure class="post-full-image" style="background-image: url(/assets/built/images/loginCamp.png)">
            </figure>
            
            -->

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h1 id="camp519-kiosk-project-3google-firebase-연동">Camp51.9 Kiosk Project (3)Google Firebase 연동</h1>

<h2 id="camp519-kiosk-project">Camp51.9 Kiosk Project</h2>

<p>html, css, javascript를 처음 공부하는 동시에 영등포고등학교 메이커스페이스 Camp51.9의 시설 이용 키오스크를 직접 개발하는 프로젝트.</p>

<h2 id="개요">개요</h2>

<p>앞선 글의 소스코드나 동작 과정을 보면 DB가 존재함을 알 수 있었습니다. 키오스크이고 로그인을 지원하기 때문에 회원가입한 사용자의 정보와 메이커스페이스의 시설 이용정보, 남은 여석, 유료 장비 사용 여부 등 여러가지 실시간으로 바뀌는 데이터들을 관리할 DB가 필요합니다. 하지만 그 크기가 크지 않고 가볍기 때문에 편하고 쉽게 사용할 수 있는 DB를 찾아보던중 구글의 FireBase를 알게 되었습니다. 
 이번 글은 html과 Fireabase를 연동한 과정을 작성하겠습니다.</p>

<h2 id="개발-과정">개발 과정</h2>

<p>파이어베이스에 저장될 정보는 다음과 같습니다.</p>
<ol>
  <li>이용자의 회원가입 정보(이름, 이메일, 전화번호, 소속(학교이기 때문에 외부인과 구분이 필요합니다.))</li>
  <li>로그인한 이용자의 정보</li>
  <li>시설 및 로비의 남은 좌석 정보</li>
  <li>유료 장비 사용 가능 여부에 관한 정보</li>
  <li>기타</li>
</ol>

<p>이러한 정보들을 저장하기 위해 파이어베이스를 사용해보겠습니다.</p>

<h3 id="google-firebase">Google Firebase</h3>

<p>파이어베이스(Firebase)는 구글에서 제공하는 모바일, 웹 어플리케이션 개발 플랫폼이자 실시간 데이터베이스입니다. 말그대로 실시간 데이터베이스이기 때문에 사용자가 정보를 입력할 때 마다 실시간으로 데이터베이스의 값이 바뀝니다.</p>

<ol>
  <li>Firebase 웹 어플리케이션 프로젝트 생성 및 연동 스크립트 가져오기</li>
</ol>

<p>파이어베이스에서 웹 어플리케이션 용도로 프로젝트를 생성합니다.</p>

<p><img src="https://github.com/HwanGonJang/HwanGonJang.github.io/blob/master/Pictures/h3_1.png?raw=true" /></p>

<p>프로젝트 설정 메뉴에서 html과 연동을 위한 firebase 스크립트를 찾을 수 있습니다. 그대로 가져오고 이때 analytics 부분은 사용하지 않으므로 지워줍니다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>
   <span class="err">        </span><span class="c1">// Your web app's Firebase configuration</span>
  <span class="err">        </span><span class="c1">// For Firebase JS SDK v7.20.0 and later, measurementId is optional</span>
   <span class="err">        </span><span class="kd">var</span><span class="err"> </span><span class="nx">firebaseConfig</span><span class="err"> </span><span class="o">=</span><span class="err"> </span><span class="p">{</span>
   <span class="err">        </span><span class="nx">apiKey</span><span class="p">:</span><span class="err"> </span><span class="s2">"AIzaSyC5_G3RZhRjxLyh27dgrTNXX2ul1uMF9OI"</span><span class="p">,</span>
   <span class="err">        </span><span class="nx">authDomain</span><span class="p">:</span><span class="err"> </span><span class="s2">"test-90278.firebaseapp.com"</span><span class="p">,</span>
   <span class="err">        </span><span class="nx">projectId</span><span class="p">:</span><span class="err"> </span><span class="s2">"test-90278"</span><span class="p">,</span>
   <span class="err">        </span><span class="nx">storageBucket</span><span class="p">:</span><span class="err"> </span><span class="s2">"test-90278.appspot.com"</span><span class="p">,</span>
   <span class="err">        </span><span class="nx">messagingSenderId</span><span class="p">:</span><span class="err"> </span><span class="s2">"315329074324"</span><span class="p">,</span>
   <span class="err">        </span><span class="nx">appId</span><span class="p">:</span><span class="err"> </span><span class="s2">"1:315329074324:web:3bfb0adda43868a8975081"</span><span class="p">,</span>
   <span class="err">        </span><span class="nx">measurementId</span><span class="p">:</span><span class="err"> </span><span class="s2">"G-96ZE5HQBEJ"</span>
   <span class="err">      </span><span class="p">};</span>
   <span class="err">      </span><span class="c1">// Initialize Firebase</span>
   <span class="err">      </span><span class="nx">firebase</span><span class="p">.</span><span class="nx">initializeApp</span><span class="p">(</span><span class="nx">firebaseConfig</span><span class="p">);</span>
   <span class="o">&lt;</span><span class="sr">/script</span><span class="err">&gt;
</span></code></pre></div></div>

<p>스크립트에는 연결을 위한 Apikey, 도메인, 프로젝트 ID등 고유 값들이 자동으로 작성되어있습니다. html의 &lt;body&gt; 태그 및에 붙여넣기 해주기만 하면 끝입니다.</p>

<ol>
  <li>파이어베이스에 값 넣기 : set 명령과 push 명령 이해하기</li>
</ol>

<p>먼저 파이어베이스 입력에 사용되는 명령에는 set과 push가 있습니다. 둘의 특징은 다음과 같습니다.</p>

<ul>
  <li>set : 특정 위치에 입력값을 작성하나 다른 값을 가진 같은 요청을 받으면 기존의 값을 없애고 다시 입력합니다.</li>
  <li>push : 기본적으로 set과 같은 명령이나 기존의 값을 초기화하지 않습니다. 하지만 매 처음 입력마다 랜덤의 고유 key값을 경로에 집어넣습니다.</li>
</ul>

<p>제가 만들고 있는 키오스크는 많은 사용자들이 로그인하고 이용정보를 저장하기 때문에 push를 사용하는 것이 좋아보이지만 저는 set을 사용했습니다. 처음 개발할때는 push를 사용했으나 같은 위치에 계속해서 정보를 저장하는 대신 랜덤의 key값을 집어 넣기 때문에 나중에 값을 가져올때, 즉 출력 시에 경로를 지정할 수 없는 문제가 생겼습니다.</p>

<p>그래서 저는 입력에서 set 명령을 사용했고 한 위치에 하나의 값만 저장하는 단점을 보완하기 위해 key값에 제가 참조하기 쉽도록 숫자를 더하여 간단한 규칙을 지정했습니다(ex. 아이디1 키는 아이디를, 아이디2 키는 이름을 저장하는 방식입니다. 이렇게 하면 조금 복잡해지지만 set에서 서로 다른 위치에 다른 값을 하나씩 저장할 수 있습니다.).  이용 정보와 사용하는 시설, 장비, 여석 등 또한 비슷하게 저장하였습니다.</p>

<p>파이어베이스 입력을 위한 명령은 다음과 같습니다.</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kd">var</span> <span class="nx">dbRefObject</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nx">database</span><span class="p">().</span><span class="nx">ref</span><span class="p">(</span><span class="s1">'Login/'</span><span class="o">+</span><span class="nx">userid</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">userid</span><span class="p">).</span><span class="kd">set</span><span class="p">({</span><span class="s2">"ID"</span><span class="p">:</span> <span class="nx">userid</span><span class="p">});</span>
</code></pre></div></div>
<p>변수를 하나 선언하고 파이어베이스에 저장할 경로와 이름, 값을 지정해주기만 하면 됩니다. 위의 경우 회원가입 페이지의 한 부분으로 userid 변수는 사용자가 입력한 아이디이고 그 입력한 아이디를 파이어베이스에 저장하는 코드입니다. 같은 방식으로 이름, 소속 등을 입력해줍니다.</p>

<ol>
  <li>파이어베이스의 값 출력하기</li>
</ol>

<p>앞서 말했듯이 push는 값을 저장하는 용도로는 깔끔하지만 랜덤의 key값을 지정하기 때문에 참조가 어렵습니다. 따라서 set을 사용하되 고유의 규칙을 가진 key 값을 지정해주었습니다. 회원가입에서 사용자가 정한 ID를 기준으로 숫자를 붙여 저장해 주었습니다.</p>

<p><img src="https://github.com/HwanGonJang/HwanGonJang.github.io/blob/master/Pictures/h3_2.png?raw=true" /></p>

<p>파이어베이스에 저장할 정보 중 현재 이용중인 이용자의 정보를 저장해야 한다고 먼저 정했습니다. 이 정보는 웹에서 로그인 한 후  ~님 의 형식으로 출력되는 부분입니다.</p>

<p><img src="https://github.com/HwanGonJang/HwanGonJang.github.io/blob/master/Pictures/h1_5.png?raw=true" /></p>

<p>그래서 저는 파이어베이스에 따로 tmp라는 공간을 만들어 현재 사용하고 있는 이용자의 ‘ID’를 저장해주었습니다. 이렇게 하면 현재 사용자의 ID를 가져와 위의 입력 규칙에 맞게 숫자를 더하는 방식으로 원하는 정보를 참조할 수 있습니다. 아래는 이러한 방식으로 작성한 출력 코드입니다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   <span class="kd">var</span> <span class="nx">dbTestRef</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nx">database</span><span class="p">().</span><span class="nx">ref</span><span class="p">(</span><span class="s1">'Login/'</span> <span class="o">+</span> <span class="nx">userid</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">userid</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="s1">'/'</span><span class="p">)</span>
        <span class="nx">dbTestRef</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'child_added'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"warning"</span><span class="p">).</span><span class="nx">innerHTML</span><span class="o">=</span><span class="s2">"확인완료"</span><span class="p">;</span> 
        <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">"write"</span><span class="p">).</span><span class="nx">innerHTML</span><span class="o">=</span><span class="nx">data</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">+</span> <span class="s2">" 님으로&lt;br&gt;이용하시겠습니까?"</span><span class="p">;</span>
        <span class="p">})</span>
</code></pre></div></div>

<p>위 코드는 로그인 html의 한 부분입니다. 입력처럼 변수를 생성하고 참조할 경로를 지정해주면 data.val() 이라는 변수로 파이어베이스의 값을 가져오게됩니다. 아래는 이용자의 ID로 이용자의 이름을 가져오는 코드입니다.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//tmp의 이용자 ID 가져오기</span>
<span class="kd">var</span> <span class="nx">dbTestRef</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nx">database</span><span class="p">().</span><span class="nx">ref</span><span class="p">(</span><span class="s1">'tmp/'</span><span class="p">)</span>
	<span class="nx">dbTestRef</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'child_added'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
	<span class="c1">//파이어베이스에 이용날짜 저장</span>
	<span class="kd">var</span> <span class="nx">currentDay</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nx">database</span><span class="p">().</span><span class="nx">ref</span><span class="p">(</span><span class="s1">'CurrentUser/CurrentDay'</span><span class="p">).</span><span class="kd">set</span><span class="p">({</span><span class="s2">"currentDay"</span><span class="p">:</span> <span class="nx">year</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">month</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">date</span><span class="p">});</span>
	<span class="c1">//파이어베이스에 이용시간 저장</span>
	<span class="kd">var</span> <span class="nx">currentTime</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nx">database</span><span class="p">().</span><span class="nx">ref</span><span class="p">(</span><span class="s1">'CurrentUser/'</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'Time'</span><span class="p">).</span><span class="kd">set</span><span class="p">({</span><span class="s2">"currentTime"</span><span class="p">:</span> <span class="nx">hours</span> <span class="o">+</span> <span class="s1">':'</span> <span class="o">+</span> <span class="nx">minutes</span><span class="p">});</span>
	<span class="c1">//파이어베이스의 이용자 이름으로 출입시간 및 이용시설정보 저장</span>
	<span class="kd">var</span> <span class="nx">currentuser</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nx">database</span><span class="p">().</span><span class="nx">ref</span><span class="p">(</span><span class="s1">'CurrentUser/'</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'/'</span> <span class="o">+</span> <span class="nx">data</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span> <span class="o">+</span> <span class="s1">'TimeLobby'</span><span class="p">).</span><span class="kd">set</span><span class="p">({</span><span class="s2">"LobbyTime"</span><span class="p">:</span> <span class="nx">lobbytimeH</span> <span class="o">+</span> <span class="s2">"시간"</span> <span class="o">+</span> <span class="nx">lobbytimeM</span> <span class="o">+</span> <span class="s2">"분"</span><span class="p">});</span>
	<span class="c1">//로비 이용자가 이용 시 로비 여석 -1</span>
	<span class="kd">var</span> <span class="nx">dbTestRef1</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nx">database</span><span class="p">().</span><span class="nx">ref</span><span class="p">(</span><span class="s1">'Establishment/Lobby/'</span><span class="p">)</span>
	<span class="nx">dbTestRef1</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'child_added'</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
		<span class="kd">var</span> <span class="nx">LobbyUser</span> <span class="o">=</span> <span class="nx">firebase</span><span class="p">.</span><span class="nx">database</span><span class="p">().</span><span class="nx">ref</span><span class="p">(</span><span class="s1">'Establishment/Lobby'</span><span class="p">).</span><span class="kd">set</span><span class="p">({</span><span class="s2">"Lobby"</span><span class="p">:</span> <span class="nx">data</span><span class="p">.</span><span class="nx">val</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">});</span> 
	<span class="p">})</span>  
<span class="p">})</span>
</code></pre></div></div>

<p>다음과 같은 방식으로 tmp의 이용중인 이용자의 ID를 가져오고 다시 사용하여 사용자 별로 출입시간을 저장합니다.</p>

<h2 id="결과">결과</h2>
<p><img src="https://github.com/HwanGonJang/HwanGonJang.github.io/blob/master/Pictures/h3_3.png?raw=true" /></p>

<p>이 방법으로 저는 파이어베이스를 연동하고 입력과 출력을 동시에 해결했습니다. 키오스크 용 웹 어플리케이션에 반드시 필요한 상호작용 데이터베이스인 파이어베이스를  처음 사용해봤지만 하나하나 공부하며 직접 만드는 과정이 매우 의미있었던 것 같습니다. 실제로 메이커스페이스에서 유용하게 활용하고 있습니다.</p>

<p>다음 글에서는 Google Spread Sheet를 연동하는 과정을 다루겠습니다. 감사합니다.</p>

<p><a href="https://github.com/HwanGonJang/Camp51.9_KioskProject">깃허브</a></p>

                </div>
            </section>

            
            <!-- Email subscribe form at the bottom of the page -->
            <!--
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to Gon's Portfolio</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email"  placeholder="youremail@example.com" />
    </div>
    <button class="" type="submit" disabled><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

                </section>
            
            -->

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/built/images/me.png" alt="HwanGonJang" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/HwanGonJang">HwanGonJang</a></h4>
                                
                                    <p>Soongsil Univ. 메이커스페이스 소프트웨어 매니저</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/HwanGonJang">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                        var disqus_config = function () {
                            this.page.url = 'https://HwanGonJang.github.io/KioskProject03';
                            this.page.identifier = '/KioskProject03';
                            this.page.title = 'Camp51.9 Kiosk Project (3)Google Firebase 연동';
                        };
                        (function() {
                            var d = document, s = d.createElement('script');
                            s.src = 'https://xxxxxxxx.disqus.com/embed.js';
                            s.setAttribute('data-timestamp', +new Date());
                            (d.head || d.body).appendChild(s);
                        })();
                    </script>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/built/images/main.png)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; Gon's Portfolio &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/web/">Web</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/KioskProject_Final">Camp51.9 Kiosk Project (5)8개월 간의 수정과 배포</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/moa">MOA React SNS 웹 만들기(SG해커톤)</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/KioskProject04">Camp51.9 Kiosk Project (4)Google Spread Sheet 연동</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/web/">
                                
                                    See all 5 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/KioskProject04">
                <div class="post-card-image" style="background-image: url(/assets/built/images/loginCamp.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/KioskProject04">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Web</span>
                            
                        
                    

                    <h2 class="post-card-title">Camp51.9 Kiosk Project (4)Google Spread Sheet 연동</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/me.png" alt="HwanGonJang" />
                        
                        <span class="post-card-author">
                            <a href="/author/HwanGonJang/">HwanGonJang</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/KioskProject02">
                <div class="post-card-image" style="background-image: url(/assets/built/images/loginCamp.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/KioskProject02">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Web</span>
                            
                        
                    

                    <h2 class="post-card-title">Camp51.9 Kiosk Project (2)체온 입력칸 추가</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/built/images/me.png" alt="HwanGonJang" />
                        
                        <span class="post-card-author">
                            <a href="/author/HwanGonJang/">HwanGonJang</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="https://HwanGonJang.github.io/">
            
            <span>Gon's Portfolio</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Camp51.9 Kiosk Project (3)Google Firebase 연동</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=Camp51.9+Kiosk+Project+%283%29Google+Firebase+%EC%97%B0%EB%8F%99&amp;url=https://HwanGonJang.github.io/KioskProject03"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://HwanGonJang.github.io/KioskProject03"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="https://HwanGonJang.github.io/">Gon's Portfolio</a> &copy; 2021</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a> using
                    <a href="https://github.com/jekyller/jasper2" target="_blank" rel="noopener">Jasper2</a></section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    
                    
                    <a href="https://ghost.org" target="_blank" rel="noopener">Ghost</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                <h1 class="subscribe-overlay-title">Subscribe to Gon's Portfolio</h1>
                <p class="subscribe-overlay-description">Stay up to date! Get all the latest &amp; greatest posts delivered straight to your inbox</p>
                <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email"  placeholder="youremail@example.com" />
    </div>
    <button class="" type="submit" disabled><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

            </div>
        </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-xxxxxxxx-x', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
